// IRC 2021 Span Tables
const spanTables = {
  // Table R507.5 - Deck Beam Span Lengths
  beams: {
    'SPF #2': {
      '(1)2x8': { 6: 7.0, 7: 6.6, 8: 6.0, 9: 5.4, 10: 4.8, 11: 4.4, 12: 4.0, 14: 3.5, 16: 3.0, 18: 2.7, 20: 2.5 },
      '(2)2x8': { 6: 9.0, 7: 8.4, 8: 7.9, 9: 7.1, 10: 6.4, 11: 5.8, 12: 5.3, 14: 4.6, 16: 4.0, 18: 3.6, 20: 3.2 },
      '(3)2x8': { 6: 10.6, 7: 10.0, 8: 9.0, 9: 8.3, 10: 7.6, 11: 6.10, 12: 6.4, 14: 5.5, 16: 4.10, 18: 4.4, 20: 3.11 },
      '(1)2x10': { 6: 8.11, 7: 8.3, 8: 7.7, 9: 6.10, 10: 6.2, 11: 5.7, 12: 5.2, 14: 4.5, 16: 3.11, 18: 3.6, 20: 3.2 },
      '(2)2x10': { 6: 11.6, 7: 10.8, 8: 10.0, 9: 9.2, 10: 8.3, 11: 7.7, 12: 6.11, 14: 5.11, 16: 5.2, 18: 4.7, 20: 4.2 },
      '(3)2x10': { 6: 13.7, 7: 12.10, 8: 11.9, 9: 10.8, 10: 9.9, 11: 8.11, 12: 8.2, 14: 7.0, 16: 6.2, 18: 5.6, 20: 5.0 },
      '(1)2x12': { 6: 10.10, 7: 10.0, 8: 9.2, 9: 8.5, 10: 7.6, 11: 6.11, 12: 6.3, 14: 5.5, 16: 4.9, 18: 4.3, 20: 3.10 },
      '(2)2x12': { 6: 14.1, 7: 13.0, 8: 12.2, 9: 11.0, 10: 10.0, 11: 9.2, 12: 8.4, 14: 7.2, 16: 6.4, 18: 5.8, 20: 5.1 },
      '(3)2x12': { 6: 16.8, 7: 15.6, 8: 14.5, 9: 13.2, 10: 11.11, 11: 10.10, 12: 9.11, 14: 8.6, 16: 7.6, 18: 6.9, 20: 6.1 }
    },
    'DF #1': {
      '(1)2x8': { 6: 8.0, 7: 7.4, 8: 6.9, 9: 6.2, 10: 5.7, 11: 5.2, 12: 4.9, 14: 4.2, 16: 3.8, 18: 3.4, 20: 3.1 },
      '(2)2x8': { 6: 10.5, 7: 9.8, 8: 9.0, 9: 8.2, 10: 7.5, 11: 6.10, 12: 6.4, 14: 5.6, 16: 4.11, 18: 4.5, 20: 4.0 },
      '(3)2x8': { 6: 12.5, 7: 11.7, 8: 10.8, 9: 9.9, 10: 8.11, 11: 8.2, 12: 7.6, 14: 6.6, 16: 5.10, 18: 5.3, 20: 4.9 },
      '(1)2x10': { 6: 10.3, 7: 9.6, 8: 8.9, 9: 8.0, 10: 7.3, 11: 6.7, 12: 6.1, 14: 5.3, 16: 4.8, 18: 4.3, 20: 3.10 },
      '(2)2x10': { 6: 13.5, 7: 12.5, 8: 11.7, 9: 10.7, 10: 9.7, 11: 8.10, 12: 8.1, 14: 7.0, 16: 6.2, 18: 5.6, 20: 5.0 },
      '(3)2x10': { 6: 16.0, 7: 14.10, 8: 13.9, 9: 12.6, 10: 11.6, 11: 10.7, 12: 9.8, 14: 8.4, 16: 7.4, 18: 6.7, 20: 5.11 },
      '(1)2x12': { 6: 12.6, 7: 11.7, 8: 10.8, 9: 9.9, 10: 8.11, 11: 8.1, 12: 7.5, 14: 6.5, 16: 5.8, 18: 5.1, 20: 4.7 },
      '(2)2x12': { 6: 16.4, 7: 15.2, 8: 14.1, 9: 12.11, 10: 11.8, 11: 10.8, 12: 9.10, 14: 8.6, 16: 7.6, 18: 6.9, 20: 6.1 },
      '(3)2x12': { 6: 19.6, 7: 18.1, 8: 16.10, 9: 15.5, 10: 14.0, 11: 12.10, 12: 11.9, 14: 10.1, 16: 8.10, 18: 8.0, 20: 7.3 }
    },
    'HF #2': {
      '(1)2x8': { 6: 7.0, 7: 6.6, 8: 6.0, 9: 5.5, 10: 5.0, 11: 4.6, 12: 4.2, 14: 3.8, 16: 3.3, 18: 3.0, 20: 2.8 },
      '(2)2x8': { 6: 9.2, 7: 8.7, 8: 7.11, 9: 7.2, 10: 6.6, 11: 6.0, 12: 5.6, 14: 4.10, 16: 4.3, 18: 3.10, 20: 3.6 },
      '(3)2x8': { 6: 11.0, 7: 10.3, 8: 9.6, 9: 8.7, 10: 7.10, 11: 7.2, 12: 6.7, 14: 5.9, 16: 5.2, 18: 4.8, 20: 4.3 },
      '(1)2x10': { 6: 9.0, 7: 8.5, 8: 7.9, 9: 7.0, 10: 6.5, 11: 5.10, 12: 5.5, 14: 4.8, 16: 4.2, 18: 3.9, 20: 3.5 },
      '(2)2x10': { 6: 11.10, 7: 11.1, 8: 10.3, 9: 9.4, 10: 8.6, 11: 7.9, 12: 7.1, 14: 6.2, 16: 5.5, 18: 4.11, 20: 4.5 },
      '(3)2x10': { 6: 14.1, 7: 13.1, 8: 12.2, 9: 11.1, 10: 10.1, 11: 9.3, 12: 8.5, 14: 7.4, 16: 6.6, 18: 5.10, 20: 5.3 },
      '(1)2x12': { 6: 11.0, 7: 10.2, 8: 9.5, 9: 8.7, 10: 7.10, 11: 7.2, 12: 6.6, 14: 5.8, 16: 5.0, 18: 4.6, 20: 4.1 },
      '(2)2x12': { 6: 14.4, 7: 13.4, 8: 12.5, 9: 11.4, 10: 10.3, 11: 9.5, 12: 8.8, 14: 7.6, 16: 6.8, 18: 6.0, 20: 5.5 },
      '(3)2x12': { 6: 17.2, 7: 15.11, 8: 14.9, 9: 13.6, 10: 12.4, 11: 11.3, 12: 10.3, 14: 8.10, 16: 7.11, 18: 7.1, 20: 6.6 }
    },
    'SP #2': {
      '(1)2x8': { 6: 7.3, 7: 6.8, 8: 6.1, 9: 5.6, 10: 5.0, 11: 4.6, 12: 4.2, 14: 3.7, 16: 3.2, 18: 2.10, 20: 2.7 },
      '(2)2x8': { 6: 9.5, 7: 8.9, 8: 8.1, 9: 7.4, 10: 6.7, 11: 6.1, 12: 5.6, 14: 4.9, 16: 4.3, 18: 3.9, 20: 3.5 },
      '(3)2x8': { 6: 11.4, 7: 10.6, 8: 9.8, 9: 8.10, 10: 8.0, 11: 7.3, 12: 6.8, 14: 5.9, 16: 5.1, 18: 4.6, 20: 4.1 },
      '(1)2x10': { 6: 9.3, 7: 8.7, 8: 7.10, 9: 7.1, 10: 6.5, 11: 5.10, 12: 5.4, 14: 4.7, 16: 4.1, 18: 3.8, 20: 3.4 },
      '(2)2x10': { 6: 12.2, 7: 11.3, 8: 10.5, 9: 9.6, 10: 8.7, 11: 7.10, 12: 7.2, 14: 6.2, 16: 5.5, 18: 4.10, 20: 4.4 },
      '(3)2x10': { 6: 14.6, 7: 13.5, 8: 12.5, 9: 11.3, 10: 10.3, 11: 9.4, 12: 8.6, 14: 7.4, 16: 6.5, 18: 5.9, 20: 5.2 },
      '(1)2x12': { 6: 11.4, 7: 10.5, 8: 9.7, 9: 8.9, 10: 8.0, 11: 7.3, 12: 6.7, 14: 5.8, 16: 5.0, 18: 4.5, 20: 4.0 },
      '(2)2x12': { 6: 14.9, 7: 13.7, 8: 12.8, 9: 11.6, 10: 10.5, 11: 9.6, 12: 8.9, 14: 7.6, 16: 6.7, 18: 5.11, 20: 5.3 },
      '(3)2x12': { 6: 17.8, 7: 16.4, 8: 15.2, 9: 13.10, 10: 12.6, 11: 11.5, 12: 10.5, 14: 8.11, 16: 7.10, 18: 7.0, 20: 6.4 }
    }
  },
  
  // Table R507.6 - Deck Joist Spans
  joists: {
    'SPF #2': {
      '2x6': { 12: 10.2, 16: 9.0, 24: 7.7, 32: 6.7, 40: 5.11, 48: 5.4 },
      '2x8': { 12: 13.5, 16: 11.10, 24: 10.0, 32: 8.9, 40: 7.10, 48: 7.1 },
      '2x10': { 12: 16.8, 16: 15.0, 24: 12.8, 32: 11.0, 40: 9.10, 48: 9.0 },
      '2x12': { 12: 20.3, 16: 18.0, 24: 15.4, 32: 13.4, 40: 11.11, 48: 10.11 }
    },
    'DF #1': {
      '2x6': { 12: 11.11, 16: 10.5, 24: 8.9, 32: 7.7, 40: 6.10, 48: 6.2 },
      '2x8': { 12: 15.7, 16: 13.9, 24: 11.7, 32: 10.1, 40: 9.0, 48: 8.2 },
      '2x10': { 12: 19.8, 16: 17.6, 24: 14.9, 32: 12.10, 40: 11.6, 48: 10.5 },
      '2x12': { 12: 23.11, 16: 21.0, 24: 18.0, 32: 15.7, 40: 14.0, 48: 12.8 }
    },
    'HF #2': {
      '2x6': { 12: 10.9, 16: 9.6, 24: 8.0, 32: 6.11, 40: 6.2, 48: 5.8 },
      '2x8': { 12: 14.1, 16: 12.5, 24: 10.5, 32: 9.1, 40: 8.1, 48: 7.5 },
      '2x10': { 12: 17.11, 16: 15.10, 24: 13.4, 32: 11.6, 40: 10.3, 48: 9.4 },
      '2x12': { 12: 21.10, 16: 19.1, 24: 16.2, 32: 14.1, 40: 12.7, 48: 11.5 }
    },
    'SP #2': {
      '2x6': { 12: 10.10, 16: 9.7, 24: 8.0, 32: 6.11, 40: 6.2, 48: 5.7 },
      '2x8': { 12: 14.4, 16: 12.8, 24: 10.6, 32: 9.2, 40: 8.2, 48: 7.5 },
      '2x10': { 12: 18.3, 16: 16.1, 24: 13.5, 32: 11.7, 40: 10.4, 48: 9.5 },
      '2x12': { 12: 22.2, 16: 19.5, 24: 16.5, 32: 14.2, 40: 12.8, 48: 11.6 }
    }
  },
  
  // Table R507.7 - Maximum Joist Spacing for Decking
  deckingSpacing: {
    'composite_1in': { perpendicular: 16, diagonal: 12, stairs: 12 },
    'wood_5/4': { perpendicular: 16, diagonal: 12, stairs: 12 },
    'wood_2x': { perpendicular: 24, diagonal: 16, stairs: 16 }
  }
};

// Helper functions for parsing span table values
function parseSpan(spanStr) {
  if (typeof spanStr === 'number') return spanStr;
  const parts = spanStr.toString().split('.');
  const feet = parseInt(parts[0]);
  const inches = parts[1] ? parseInt(parts[1]) : 0;
  return feet + inches / 12;
}

// Convert all span values to numbers
Object.keys(spanTables.beams).forEach(species => {
  Object.keys(spanTables.beams[species]).forEach(size => {
    Object.keys(spanTables.beams[species][size]).forEach(tributary => {
      spanTables.beams[species][size][tributary] = parseSpan(spanTables.beams[species][size][tributary]);
    });
  });
});

Object.keys(spanTables.joists).forEach(species => {
  Object.keys(spanTables.joists[species]).forEach(size => {
    Object.keys(spanTables.joists[species][size]).forEach(spacing => {
      spanTables.joists[species][size][spacing] = parseSpan(spanTables.joists[species][size][spacing]);
    });
  });
});